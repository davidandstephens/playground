<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">
    <link href="https://fonts.googleapis.com/css?family=Baumans&display=swap" rel="stylesheet">
    <style>
        body {
            color: limegreen;
            height: 100vh;
            margin: 0;
            padding: 0;
            background: #242424;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: 'Baumans', cursive;
        }
        h1.default {
            text-align: center;
            font-size: 25vh;
            margin: 10px;
            -webkit-text-stroke: 1px greenyellow;
            text-shadow: 5px 5px 0 darkgreen;
        }
        #logo {
            position: absolute;
            bottom: 6px;
            right: 6px;
            width: 150px;
        }
        #home {
            position: absolute;
            bottom: 12px;
            right: 6px;
        }
        .buttons {
            width: 82vw;
            display: flex;
            justify-content: center;
        }
        button {
            transition: .5s;
            font-family: 'Baumans', cursive;
            background-color: limegreen;
            color: black;
            -webkit-text-stroke: 1px greenyellow;
            font-size: 5.5vh;
            border-radius: 10px;
            border: 2px solid greenyellow;
            box-shadow: 5px 5px darkgreen;
            margin: 0 6px;
        }
        button:hover {
            background-color: blue;
            -webkit-text-stroke-color: lightseagreen;
            border-color: lightseagreen;
            box-shadow: 5px 5px blue;
        }
        button:active{
            background-color: brown;
            -webkit-text-stroke-color: palevioletred;
            border-color: palevioletred;
            box-shadow: 5px 5px brown;
        }
        .small-space {
            margin-top: 10px;
        }
    </style>
    <title>Calling out...</title>
</head>
<body>
<!-- https://www.cssscript.com/confetti-falling-animation/ -->
<script src="../js/confetti.js"></script>
<script>
    (() => {
        const randomizer = (arr, date) => {
            let todayDate = new Date();
            let students = arr;
            let bucket = [];
            let graduation = date;

            document.getElementsByTagName("body")[0].innerHTML = "<div id='student'><h1 class='default'></h1></div><button id='home'>Return Home</button>";
            if (todayDate >= graduation) {
                document.getElementById("student").innerHTML = "<h1 class='animated zoomInDown default'>Class Has Graduated!</h1>";
                setTimeout(() => confetti.start(), 1500);
                setTimeout(() => confetti.stop(), 5000);
            } else {
                document.getElementById("student").innerHTML = "<h1 class='default'>Press Space</h1>";
            }
            document.getElementById("home").addEventListener("click", () => {
                buildHTML();
            });
            document.addEventListener("keyup", (e) => {
                e.preventDefault();
                let random = Math.floor(Math.random() * students.length);
                if (e.code === "Space") {
                    if (todayDate >= graduation) {
                        document.getElementById("student").innerHTML = "<h1 class='animated zoomInDown default'>Class Has Graduated!</h1>";
                    } else {
                        let calling = students[random];
                        document.getElementById("student").innerHTML = "<h1 class='animated zoomInDown default'>" + calling + "</h1>";
                        students = students.filter((student) => {
                            return student !== calling
                        });
                        bucket.push(calling);
                        if (students.length < 1) {
                            students = bucket.slice(0);
                            bucket = [];
                        }
                    }
                    setTimeout(() => confetti.start(), 1500);
                    setTimeout(() => confetti.stop(), 5000);
                }
            })
        };

        const buildHTML = () => {
            const andromeda = ["Matthew A.", "Ali", "Carson", "Elle", "Nadia", "Edwin", "Matt B.", "Mykal", "Ricky", "John", "Nathaniel", "Alexandra", "Harley", "Jason", "Sam", "Derek", "Josh", "Nikho", "Johnny", "Nic"];
            const andromedaGrad = new Date("July 30,2019 3:00 pm");

            const betelgeuse = ["Mark", "Brandi", "Alex", "Austin", "Joey G.", "Peter", "Mario", "Susan", "Kyle", "Alicia", "Lam", "Joseph 0.", "Victor", "Aaron", "Nick", "Alli", "Steven"];
            const betelGrad = new Date("Tue October 8,2019 3:00 pm");

            const ceres = ["Alex", "Brance", "Sebastian", "Kevin", "Mitchell", "Eddy", "Izzy", "Yael", "John C.", "Cam", "Louis", "Lance", "Matt G.", "Annette", "Jason", "Beverly", "Dani", "Jonathan L.", "Matt L.", "Michael", "Bridget", "Mark M.", "Kyndall", "Ryan", "Mark S.", "Laura"];
            const ceresGrad = new Date("December 11,2019 3:00 pm");

            const deimos = [];
            const deimosGrad = new Date("June 22, 2200 3:00 pm");

            confetti.remove();
            document.getElementsByTagName("body")[0].innerHTML = "<div id=\"welcome\">\n" +
                "    <h1 class=\"default\">Select A Class</h1>\n" +
                "</div>\n" +
                "<div class=\"buttons\">\n" +
                "    <button id=\"andromeda\">Andromeda</button>\n" +
                "    <button id=\"betelgeuse\">Betelgeuse</button>\n" +
                "    <button id=\"ceres\">Ceres</button>\n" +
                "    <button id=\"deimos\">Deimos</button>\n" +
                "    <button id=\"europa\">Europa</button>\n" +
                "    <button id=\"fomalhaut\">Fomalhaut</button>\n" +
                "</div>\n" +
                "<div class=\"small-space buttons\">\n" +
                "    <button id=\"ganymeade\">Ganymeade</button>\n" +
                "    <button id=\"hyperion\">Hyperion</button>\n" +
                "    <button id=\"io\">Io</button>\n" +
                "    <button id=\"jupiter\">Jupiter</button>\n" +
                "    <button id=\"kochab\">Kochab</button>\n" +
                "    <button id=\"luna\">Luna</button>\n" +
                "    <button id=\"mercury\">Mercury</button>\n" +
                "</div>\n" +
                "<div class=\"small-space buttons\">\n" +
                "    <button id=\"neptune\">Neptune</button>\n" +
                "    <button id=\"oberon\">Oberon</button>\n" +
                "    <button id=\"polaris\">Polaris</button>\n" +
                "    <button id=\"quasar\">Quasar</button>\n" +
                "    <button id=\"regulus\">Regulus</button>\n" +
                "    <button id=\"sol\">Sol</button>\n" +
                "    <button id=\"titan\">Titan</button>\n" +
                "</div>\n" +
                "<div class=\"small-space buttons\">\n" +
                "    <button id=\"umbriel\">Umbriel</button>\n" +
                "    <button id=\"venus\">Venus</button>\n" +
                "    <button id=\"wezen\">Weywot</button>\n" +
                "    <button id=\"xena\">Xena</button>\n" +
                "    <button id=\"ymir\">Ymir</button>\n" +
                "    <button id=\"zodiac\">Zodiac</button>\n" +
                "</div>\n" +
                "\n" +
                "<img id=\"logo\" src=\"../img/codeup_logo_lime-green.png\" alt=\"codeup-logo\">";

            document.getElementById("andromeda").addEventListener("click", () => {
                randomizer(andromeda, andromedaGrad)
            });

            document.getElementById("betelgeuse").addEventListener("click", () => {
                randomizer(betelgeuse,betelGrad);
            });

            document.getElementById("ceres").addEventListener("click", () => {
                randomizer(ceres, ceresGrad);
            });

            document.getElementById("deimos").addEventListener("click", () => {
                randomizer(deimos, deimosGrad)
            });
        };

        buildHTML();
        // test
    })();
</script>
</body>
</html>